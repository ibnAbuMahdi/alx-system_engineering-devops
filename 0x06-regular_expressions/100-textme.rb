#!/usr/bin/env ruby
# text me :(^(\w+)$|((\+?\d{1,3})?^\d{10,10}$)#

s = ARGV[0].scan(/\[[^\]]*from:(\w+|((\+?\d{1,3})?\d{10,10}))\]/)[0]
r = ARGV[0].scan(/\[[^\]]*to:(\w+|((\+?\d{1,3})?\d{10,10}))\]/)[0]
f = ARGV[0].scan(/\[[^\]]*flags:(-?\d{1}:-?\d{1}:-?\d{1}:-?\d{1}:-?\d{1})\]/)[0] 
puts s[0] + "," + r[0] + "," + f[0]

